<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To DO</title>
</head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
<style>
    html{
        box-sizing: border-box;
        -webkit-text-size-adjust: 100%; /* Prevents font scaling in landscape mode on iOS */
        height: auto; /* Allows dynamic height without extra scroll */
        display: flex;
        flex-direction: column;
        margin: 0;
    }
    *, *:before, *:after {
            box-sizing: inherit;
        }
        body {
            background: linear-gradient(135deg, #f3e5f5, #e1bee7);
            font-family: 'Arial', sans-serif;
            color: #4a148c;
            min-height: 100vh;
            margin: 0;
            display: flex;
            flex-direction: column;
        }
        .todo {
            max-width: 500px;
            width: 100%;
            margin: 50px auto;
            background-color: #ffffff;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        .main-container {
            flex-grow: 1; /* Ensures the container grows with the list */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
        }
        h1 {
            font-weight: bold;
            font-size: 1.8rem;
        }
        .input-group {
            margin-bottom: 20px;
        }
        .list-group-item {
            border: none;
            border-radius: 10px;
            margin-bottom: 10px;
            background: #f3e5f5;
            padding: 10px 15px;
            transition: background 0.3s ease;
            text-align: left; /* Align text to the left */
        }
        .list-group-item:hover {
            background: #e1bee7;
        }
        .footer {
            background-color: #4a148c;
            color: white;
            text-align: center;
            padding: 20px;
            /* position: fixed; */
            /* bottom: 0; */
            width: 100%;
            margin-top: auto;
            flex-shrink: 0;
        }
        .footer a {
            color: #ffffff;
            text-decoration: none;
            margin: 0 10px;
            font-weight: bold;
        }
        .footer a:hover {
            text-decoration: underline;
        }
        .footer i {
            margin-right: 8px;
        }
        @media (max-width: 768px) {
            h1 {
                font-size: 1.5rem;
            }
            p {
               margin-top: 0;
               margin-bottom: 0rem;
               display: inline-grid;
            }
            
            p.contact_me {
                display: none;
            }
            p.links_me {
                /* margin: 10px; */
                gap: 10%;
            }
            .hide{
                display: none;
            }
            span.over {
             overflow-wrap: anywhere;
            }
            span.over2 {
             overflow-wrap: anywhere;
            }
            
 
            }
            @media (max-width: 320px){
                h1 {
                font-size: 1.5rem;
            }
            p {
               margin-top: 0;
               margin-bottom: 0rem;
               display: ruby;
               font-size: medium;
            }
            .icon_p{
                line-height: inherit !important;
            }
            .hide{
                display: none;
            }
            span.over {
             overflow-wrap: anywhere;
            }
            span.over2 {
             overflow-wrap: anywhere;
            }
            
            .footer a {
            color: #ffffff;
            text-decoration: none;
            /* margin: 0 10px; */
            font-weight: bold;
            display: flex;
            align-items: stretch;
        }
        .linkdin {
    margin-top: 0;
    margin-bottom: 0rem;
    display:inline;
}
 
            }
            
    </style>


</style>
<body>
    <div class="todo">
        <h1 class="text-center mb-4">To Do List</h1>
        <div class="input-group mb-3">
            <input type="text" class="form-control" id="imput" placeholder="Add Task............">
            <button class="btn btn-dark" id="addBtn" onclick="btn1()">Add</button>
        </div>
        <ul class="list-group" id="apndList">
            <!-- <li class="mb-2 d-flex list-style-type-none justify-content-between align-items-center">
                <span class="text-center">GYm</span>
                <div>
                    <button class="btn btn-success btn-sm me-2 complete-btn">Complete</button>
                    <button class="btn btn-danger btn-sm delete-btn">Delete</button>
                </div>
            </li> -->
        </ul>
    </div>
    <div class="footer">
        <p class="contact_me">Connect with me :</p>
        <p class="links_me">
            <a href="tel:+918178495354"><i class="fas fa-phone icon_p"></i>+91 8178495354</a> <span class="hide">|</span>
            <a href="mailto:kshitj95official@gmail.com"><i class="fas fa-envelope icon_p"></i>kshitj95official@gmail.com</a>
            <a href="https://www.linkedin.com/in/kshitij-singh-477aab202" target="_blank">
                <i class="fab fa-linkedin linkdin icon_p"></i>LinkedIn
            </a>
        </p>
    </div>
    
</body>

<script>


    ///////////////////////////////////////////////
    document.addEventListener("DOMContentLoaded", loadTasks);

    
    let btn1 = (() =>{
        
      
        let imput = document.getElementById("imput").value;
        
        
    if (imput=='') {
        alert('Please enter a task!')
    }else{

        let addBtn = document.getElementById("addBtn");
    
        let apndList = document.getElementById("apndList");
        
        
    let lisst = document.createElement("li");
    lisst.classList.add('list-group-item','mb-2', 'over', 'list-style-type-none', 'justify-content-between', 'align-items-center');
    // ---------
    let spann = document.createElement("span");
    spann.classList.add('text-center','over2');
    spann.textContent = imput;
    lisst.appendChild(spann);
    // ----------
    let taskDiv = document.createElement("div");
    
    let compBtn = document.createElement("button");
    compBtn.classList.add('btn', 'btn-success', 'btn-sm', 'me-2', 'complete-btn');
    compBtn.textContent = "Complete";

    compBtn.addEventListener("click",()=>{
        // spann.style.textDecoration = "line-through" 

        if (spann.style.textDecoration == "line-through") {
        spann.style.textDecoration = "none";
    } else {
        spann.style.textDecoration = "line-through";
    }
    saveTasks();
       
    });

    taskDiv.appendChild(compBtn);

    // ------------------

    let editbtn = document.createElement("button");
    editbtn.classList.add('btn', 'btn-info', 'btn-sm', 'me-2');
    editbtn.textContent = "Update";

    editbtn.addEventListener("click",()=>{
        document.getElementById("imput").value = spann.textContent;
        apndList.removeChild(lisst);
        saveTasks();
    })
    taskDiv.appendChild(editbtn);
    
    // ---------
    let delBtn = document.createElement("button");
    delBtn.classList.add('btn', 'btn-danger', 'btn-sm', 'delete-btn');
    delBtn.textContent = "Delete";

    delBtn.addEventListener("click",()=>{
        apndList.removeChild(lisst);
        saveTasks();
    })

    taskDiv.appendChild(delBtn);
    
    // ===
    
    lisst.appendChild(taskDiv);

    // apndList.insertAdjacentElement("afterbegin", lisst);
    // OR
    apndList.prepend(lisst);
   
   
    // ==================
} 
document.getElementById("imput").value = "";
document.getElementById("imput").focus();
saveTasks();


 
});
        document.getElementById("imput").addEventListener("keydown", (event) => {
                if (event.key === "Enter") {
                    btn1(); // Call btn1() when Enter is pressed
                }
            });


 

// let cleardata = document.getElementById("imput");
// cleardata.remove()

function saveTasks(){
    let tasks =[];

    document.querySelectorAll("#apndList li").forEach((li)=>{
        let taskText = li.querySelector("span").textContent;
        let isCompleted = li.querySelector("span").style.textDecoration === "line-through";
        tasks.push({text: taskText,

                    completed : isCompleted
        });
    });
    localStorage.setItem("tasks",JSON.stringify(tasks));
}

function loadTasks() {
    let savedTasks = JSON.parse(localStorage.getItem("tasks")) || [];
    let apndList = document.getElementById("apndList");

    if (!apndList) {
        console.error("Error: Element #apndList not found");
        return;
    }

    apndList.innerHTML = ""; // Prevent duplicate tasks

    savedTasks.forEach((task) => {
        let lisst = document.createElement("li");
        lisst.classList.add('list-group-item', 'mb-2', 'over', 'list-style-type-none', 'justify-content-between', 'align-items-center');

        let spann = document.createElement("span");
        spann.classList.add('text-center', 'over2');
        spann.textContent = task.text;
        if (task.completed) spann.style.textDecoration = "line-through";

        let taskDiv = document.createElement("div");

        let compBtn = document.createElement("button");
        compBtn.classList.add('btn', 'btn-success', 'btn-sm', 'me-2', 'complete-btn');
        compBtn.textContent = "Complete";

        compBtn.addEventListener("click", () => {
            spann.style.textDecoration = spann.style.textDecoration === "line-through" ? "none" : "line-through";
            saveTasks();
        });

        let editbtn = document.createElement("button");
        editbtn.classList.add('btn', 'btn-info', 'btn-sm', 'me-2');
        editbtn.textContent = "Update";

        editbtn.addEventListener("click", () => {
            document.getElementById("imput").value = spann.textContent;
            apndList.removeChild(lisst);
            saveTasks();
        });

        let delBtn = document.createElement("button");
        delBtn.classList.add('btn', 'btn-danger', 'btn-sm', 'delete-btn');
        delBtn.textContent = "Delete";

        delBtn.addEventListener("click", () => {
            apndList.removeChild(lisst);
            saveTasks();
        });

        // Append elements in the correct order
        taskDiv.appendChild(compBtn);
        taskDiv.appendChild(editbtn);
        taskDiv.appendChild(delBtn);
        lisst.appendChild(spann); // Append the span before taskDiv
        lisst.appendChild(taskDiv);
        apndList.appendChild(lisst);
    });
}


// Function to reset the entire task list
function resetTasks() {
    localStorage.removeItem("tasks"); // Remove saved tasks from localStorage
    document.getElementById("apndList").innerHTML = ""; // Clear the displayed list
}
let resetDiv = document.createElement("div");
resetDiv.classList.add('text-center', 'mt-3'); // Centering class

// Create the Reset button
let resetBtn = document.createElement("button");
resetBtn.classList.add('btn', 'btn-secondary', 'resetBtn'); // Styling
resetBtn.innerHTML = '<i class="fa-solid fa-trash-can"></i> Reset List'; // Add icon and textresetBtn.addEventListener("click", resetTasks);

// Attach event listener correctly
resetBtn.addEventListener("click", resetTasks);

// Append the button inside the div
resetDiv.appendChild(resetBtn);

// Append the div after the To-Do list
document.querySelector(".todo").appendChild(resetDiv);




    



</script>
</html>